# WebAssembly - Wave

Simple benchmark comparing performance of JavaScript vs. WebAssembly modules generated by different compilers.

[LIVE DEMO](wave.html)

## Description

This is a simulation of the [wave equation](https://en.wikipedia.org/wiki/Wave_equation)
<span class="eq">&#8706;<sup>2</sup>u/&#8706;t<sup>2</sup> = c<sup>2</sup>(&#8706;<sup>2</sup>u/&#8706;x<sup>2</sup>+&#8706;<sup>2</sup>u/&#8706;y<sup>2</sup>)</span>
across a 2D manifold with a boundary condition of u=0 along the unit circle. Use the mouse to create waves.

It contains 4 implementations of the same code:
* Standard JavaScript
* C compiled by Enscripten to WebAssembly
* JS-like code compiled by [Walt](https://github.com/ballercat/walt) to WebAssembly
* TypeScript-like code compiled by [AssemblyScript](assemblyscript.org) to WebAssembly

This particular algorithm processes large arrays but does no floating point calculations.
Memory is visible to bot JS and WebAssembly and almost all CPU time is spent in the algorithm itself.
(The canvas API introduces a minor overhead of about 10%.)

### Compiling program

There are two options for generating the .wasm file:

* C: In directory `emscripten` compile `waves.c` with Emscripten: `emcc source.c -s WASM=1 -s SIDE_MODULE=1 -o waves.wasm`
* Walt: In directory `walt` run `npm install` and `npm run build` to compile `waves.walt` to a `waves.wasm` file.
* AssemblyScript: In directory `as` run `npm install` and `npm run asbuild` to compile `index.ts` to wasm files.
    
## Other stuff

* [test.html](test.html) loads the JS and .wasm modules, tests them on a 5x5 grid, and and displays the results.

* Directory `online_versions` has copies of older versions on online IDEs.
    * `webassembly_studio` has a version comparing JS and C
    * `codepen` has .wasm bundled inline as a base64 string.

## See also
  * [WasmFiddle](https://mbebenita.github.io/WasmExplorer/)
  * [WebAssembly Explorer](https://mbebenita.github.io/WasmExplorer/)
  * [WebAssembly Studio](https://webassembly.studio/)

## Author

[Jason Tiscione](<tiscione@gmail.com>)

## License

This project is licensed under the MIT License.
